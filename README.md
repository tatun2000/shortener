# URL shortener (Сервис сокращения размеров ссылки)
<h2>Запуск приложения осуществляется из директории cmd/app:</h2>

#### go run main.go path_to_conf

*параметром командной строки необходимо указать абсолютный путь к расположению файла конфигурации
Например: **path_to_conf = /home/tatun/go/src/shortener/pkg/app/config/config.toml**

## :briefcase: В качестве хранилища используется **BoltDB**

# Возможности сервиса
## 1. Добавление ссылки в хранилище по url: http://localhost:8080/a/?url=длинная_ссылка

В результате осуществляется добавление ссылки в хранилище, а также генерируется последовательность из 8 символов, которые возвращаются в теле ответа в следующем формате **Short URL = /^[a-z0-9]{8}$/**

## 2. Переход по сокращенной ссылке по url: http://localhost:8080/s/короткая_ссылка

В результате данной операции происходит редирект на исходную (длинную) ссылку
_____________________________________________________________________________
Как уже было отмечено выше, в роли хранилища выступает *BoltDB*, в котором данные хранятся в виде коллекций *Bucket*, каждая из которых представляет собой множество key-value. Множество key-value хранится в виде *B+ дерева*:

<img src="http://cburch.com/cs/340/reading/btree/btree-6.png" width=400px, height=300px>

Эффективность строения таких деревьев и малая площадь обеспечивает хорошую производительность записи данных. BoltDB сохраняет данные в один файл (размер такого файла может спокойно достигать 1ТБ) с отображением памяти на диске. Вследствие этого возвращаются прямые указатели на адреса памяти ключей и значений. Это приводит к значительному повышению производительности. 
Один из подходов решения проблемы увеличения количества данных, которые необходимо хранить на диске, является проведение Scale-out (Горизонтальное масштабирование): перенести БД на более мощный сервер, добавить новый сервер и объединить машины в кластер.
